## API Report File for "@backstage/plugin-catalog-backend"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { AuditorService } from '@backstage/backend-plugin-api';
import { AuthService } from '@backstage/backend-plugin-api';
import { BackendFeature } from '@backstage/backend-plugin-api';
import { CatalogProcessor } from '@backstage/plugin-catalog-node';
import { CatalogProcessorCache } from '@backstage/plugin-catalog-node';
import { CatalogProcessorEmit } from '@backstage/plugin-catalog-node';
import { CatalogProcessorParser } from '@backstage/plugin-catalog-node';
import { Config } from '@backstage/config';
import { DatabaseService } from '@backstage/backend-plugin-api';
import { DiscoveryService } from '@backstage/backend-plugin-api';
import { EntitiesSearchFilter } from '@backstage/plugin-catalog-node';
import { Entity } from '@backstage/catalog-model';
import { EntityPolicy } from '@backstage/catalog-model';
import { EntityProvider } from '@backstage/plugin-catalog-node';
import { EventBroker } from '@backstage/plugin-events-node';
import { EventsService } from '@backstage/plugin-events-node';
import { HttpAuthService } from '@backstage/backend-plugin-api';
import { LocationAnalyzer } from '@backstage/plugin-catalog-node';
import { LocationSpec } from '@backstage/plugin-catalog-common';
import { LoggerService } from '@backstage/backend-plugin-api';
import { Permission } from '@backstage/plugin-permission-common';
import { PermissionAuthorizer } from '@backstage/plugin-permission-common';
import { PermissionRule } from '@backstage/plugin-permission-node';
import { PermissionRuleParams } from '@backstage/plugin-permission-common';
import { PermissionsRegistryService } from '@backstage/backend-plugin-api';
import { PermissionsService } from '@backstage/backend-plugin-api';
import { PlaceholderResolver } from '@backstage/plugin-catalog-node';
import { RootConfigService } from '@backstage/backend-plugin-api';
import { Router } from 'express';
import { SchedulerService } from '@backstage/backend-plugin-api';
import { ScmIntegrationRegistry } from '@backstage/integration';
import { ScmLocationAnalyzer } from '@backstage/plugin-catalog-node';
import { UrlReaderService } from '@backstage/backend-plugin-api';
import { Validators } from '@backstage/catalog-model';

// @public (undocumented)
export class AnnotateLocationEntityProcessor implements CatalogProcessor {
  constructor(options: { integrations: ScmIntegrationRegistry });
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  preProcessEntity(
    entity: Entity,
    location: LocationSpec,
    _: CatalogProcessorEmit,
    originLocation: LocationSpec,
  ): Promise<Entity>;
}

// @public (undocumented)
export class AnnotateScmSlugEntityProcessor implements CatalogProcessor {
  constructor(opts: {
    scmIntegrationRegistry: ScmIntegrationRegistry;
    kinds?: string[];
  });
  // (undocumented)
  static fromConfig(
    config: Config,
    options?: {
      kinds?: string[];
    },
  ): AnnotateScmSlugEntityProcessor;
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  preProcessEntity(entity: Entity, location: LocationSpec): Promise<Entity>;
}

// @public (undocumented)
export class BuiltinKindsEntityProcessor implements CatalogProcessor {
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  postProcessEntity(
    entity: Entity,
    _location: LocationSpec,
    emit: CatalogProcessorEmit,
  ): Promise<Entity>;
  // (undocumented)
  validateEntityKind(entity: Entity): Promise<boolean>;
}

// @public (undocumented)
export const CATALOG_CONFLICTS_TOPIC = 'experimental.catalog.conflict';

// @public (undocumented)
export const CATALOG_ERRORS_TOPIC = 'experimental.catalog.errors';

// @public @deprecated
export class CatalogBuilder {
  addEntityPolicy(
    ...policies: Array<EntityPolicy | Array<EntityPolicy>>
  ): CatalogBuilder;
  addEntityProvider(
    ...providers: Array<EntityProvider | Array<EntityProvider>>
  ): CatalogBuilder;
  addLocationAnalyzers(
    ...analyzers: Array<ScmLocationAnalyzer | Array<ScmLocationAnalyzer>>
  ): CatalogBuilder;
  addPermissionRules(
    ...permissionRules: Array<
      CatalogPermissionRuleInput | Array<CatalogPermissionRuleInput>
    >
  ): this;
  addPermissions(...permissions: Array<Permission | Array<Permission>>): this;
  addProcessor(
    ...processors: Array<CatalogProcessor | Array<CatalogProcessor>>
  ): CatalogBuilder;
  build(): Promise<{
    processingEngine: CatalogProcessingEngine;
    router: Router;
  }>;
  static create(env: CatalogEnvironment): CatalogBuilder;
  getDefaultProcessors(): CatalogProcessor[];
  replaceEntityPolicies(policies: EntityPolicy[]): CatalogBuilder;
  replaceProcessors(processors: CatalogProcessor[]): CatalogBuilder;
  setAllowedLocationTypes(allowedLocationTypes: string[]): CatalogBuilder;
  setEntityDataParser(parser: CatalogProcessorParser): CatalogBuilder;
  setEventBroker(broker: EventBroker | EventsService): CatalogBuilder;
  setFieldFormatValidators(validators: Partial<Validators>): CatalogBuilder;
  setLocationAnalyzer(locationAnalyzer: LocationAnalyzer): CatalogBuilder;
  setPlaceholderResolver(
    key: string,
    resolver: PlaceholderResolver,
  ): CatalogBuilder;
  setProcessingInterval(
    processingInterval: ProcessingIntervalFunction,
  ): CatalogBuilder;
  setProcessingIntervalSeconds(seconds: number): CatalogBuilder;
  // (undocumented)
  subscribe(options: {
    onProcessingError: (event: {
      unprocessedEntity: Entity;
      errors: Error[];
    }) => Promise<void> | void;
  }): void;
  useLegacySingleProcessorValidation(): this;
}

// @public @deprecated (undocumented)
export type CatalogEnvironment = {
  logger: LoggerService;
  database: DatabaseService;
  config: RootConfigService;
  reader: UrlReaderService;
  permissions: PermissionsService | PermissionAuthorizer;
  permissionsRegistry?: PermissionsRegistryService;
  scheduler?: SchedulerService;
  discovery?: DiscoveryService;
  auth?: AuthService;
  httpAuth?: HttpAuthService;
  auditor?: AuditorService;
};

// @public
export type CatalogPermissionRuleInput<
  TParams extends PermissionRuleParams = PermissionRuleParams,
> = PermissionRule<Entity, EntitiesSearchFilter, 'catalog-entity', TParams>;

// @public
const catalogPlugin: BackendFeature;
export default catalogPlugin;

// @public
export interface CatalogProcessingEngine {
  // (undocumented)
  start(): Promise<void>;
  // (undocumented)
  stop(): Promise<void>;
}

// @public (undocumented)
export class CodeOwnersProcessor implements CatalogProcessor {
  constructor(options: {
    integrations: ScmIntegrationRegistry;
    logger: LoggerService;
    reader: UrlReaderService;
  });
  // (undocumented)
  static fromConfig(
    config: Config,
    options: {
      logger: LoggerService;
      reader: UrlReaderService;
    },
  ): CodeOwnersProcessor;
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  preProcessEntity(entity: Entity, location: LocationSpec): Promise<Entity>;
}

// @public
export function createRandomProcessingInterval(options: {
  minSeconds: number;
  maxSeconds: number;
}): ProcessingIntervalFunction;

// @public (undocumented)
export class FileReaderProcessor implements CatalogProcessor {
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  readLocation(
    location: LocationSpec,
    optional: boolean,
    emit: CatalogProcessorEmit,
    parser: CatalogProcessorParser,
  ): Promise<boolean>;
}

// @public
export class PlaceholderProcessor implements CatalogProcessor {
  constructor(options: PlaceholderProcessorOptions);
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  preProcessEntity(
    entity: Entity,
    location: LocationSpec,
    emit: CatalogProcessorEmit,
  ): Promise<Entity>;
}

// @public (undocumented)
export type PlaceholderProcessorOptions = {
  resolvers: Record<string, PlaceholderResolver>;
  reader: UrlReaderService;
  integrations: ScmIntegrationRegistry;
};

// @public
export type ProcessingIntervalFunction = () => number;

// @public
export function transformLegacyPolicyToProcessor(
  policy: EntityPolicy,
): CatalogProcessor;

// @public (undocumented)
export class UrlReaderProcessor implements CatalogProcessor {
  constructor(options: {
    reader: UrlReaderService;
    logger: LoggerService;
    config?: Config;
  });
  // (undocumented)
  getProcessorName(): string;
  // (undocumented)
  readLocation(
    location: LocationSpec,
    optional: boolean,
    emit: CatalogProcessorEmit,
    parser: CatalogProcessorParser,
    cache: CatalogProcessorCache,
  ): Promise<boolean>;
}
```
